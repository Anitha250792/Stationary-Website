{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="bg-[#D3DFF8] min-h-screen py-10 font-['Roboto']">
  <!-- Hero Section -->
  <div class="container mx-auto text-center py-6">
    <img src="{% static 'images/bill.png' %}" alt="Shop Banner" class="rounded-lg shadow-md w-full h-78 object-cover">
    <h2 class="mt-4 text-xl md:text-2xl font-bold text-gray-800">
      "Where Ideas Begin ‚Äì Shop Smart, Stay Sharp!"
    </h2>
  </div>

  <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-lg border border-black">
    <h3 class="text-xl font-bold text-center mb-6">SIGN IN</h3>

    {% if error %}
      <p class="text-red-600 text-center mb-4">{{ error }}</p>
    {% endif %}

    <form id="signinForm" method="POST" action="{% url 'signin' %}" class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-2xl mx-auto">
      {% csrf_token %}

      <!-- Email / Username -->
      <div>
        <label class="block font-semibold mb-1">Email / Username</label>
        <input type="text" name="username" id="username" placeholder="Enter Email or Username"
               class="w-full px-4 py-3 border-2 text-black bg-[#7AABF5] rounded-2xl 
                      focus:outline-none focus:border-[#097AFA] placeholder-black">
        <p id="usernameError" class="text-red-500 text-sm mt-1 hidden"></p>
      </div>

      <!-- Password -->
      <div>
        <label class="block font-semibold mb-1">Password</label>
        <div class="relative">
          <input type="password" name="password" id="password" placeholder="Enter Password"
                 class="w-full px-4 py-3 border-2 text-black bg-[#7AABF5] rounded-2xl 
                        focus:outline-none focus:border-[#097AFA] placeholder-black">
          <button type="button" id="togglePassword" class="absolute right-3 top-3 text-gray-600">
            üëÅÔ∏è
          </button>
        </div>
        <p id="passwordError" class="text-red-500 text-sm mt-1 hidden"></p>
      </div>

      <!-- Optional Phone & OTP (design only) -->
      <div>
        <label class="block font-semibold mb-1">Phone Number</label>
        <input type="text" placeholder="Enter your Number"
               class="w-full px-4 py-3 border-2 text-black bg-[#7AABF5] rounded-2xl 
                      focus:outline-none focus:border-[#097AFA] placeholder-black">
      </div>

      <div>
        <label class="block font-semibold mb-1">OTP</label>
        <input type="text" placeholder="Enter OTP"
               class="w-full px-4 py-3 border-2 text-black bg-[#7AABF5] rounded-2xl 
                      focus:outline-none focus:border-[#097AFA] placeholder-black">
      </div>

      <!-- Submit -->
      <div class="col-span-1 md:col-span-2 text-center">
        <button type="submit"
                class="bg-[#097AFA] text-white px-6 sm:px-8 py-2 sm:py-3 rounded-full hover:bg-blue-600 transition w-full md:w-auto">
          Sign In
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Validation & Password Toggle Script -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const form = document.getElementById("signinForm");
  const username = document.getElementById("username");
  const password = document.getElementById("password");

  const usernameError = document.getElementById("usernameError");
  const passwordError = document.getElementById("passwordError");

  // Password toggle
  const togglePassword = document.getElementById("togglePassword");
  togglePassword.addEventListener("click", function() {
    const type = password.type === "password" ? "text" : "password";
    password.type = type;
  });

  // Form validation
  form.addEventListener("submit", function(e) {
    let valid = true;

    // Username validation
    if (!username.value.trim()) {
      usernameError.textContent = "Email or Username is required.";
      usernameError.classList.remove("hidden");
      valid = false;
    } else {
      usernameError.textContent = "";
      usernameError.classList.add("hidden");
    }

    // Password validation
    if (!password.value.trim()) {
      passwordError.textContent = "Password is required.";
      passwordError.classList.remove("hidden");
      valid = false;
    } else {
      passwordError.textContent = "";
      passwordError.classList.add("hidden");
    }

    if (!valid) e.preventDefault(); // Prevent submission if invalid
  });
});
</script>
{% endblock %}
